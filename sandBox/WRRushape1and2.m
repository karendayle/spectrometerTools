% plot WRR photodiode's output voltage for all cases of US1 and US2. 
% No iPhone, only Multimeter data
% for 20211012 SR
close all;

blue =    [0.0000, 0.4470, 0.7410];
rust =    [0.8500, 0.3250, 0.0980];
gold =    [0.9290, 0.6940, 0.1250];
purple =  [0.4940, 0.1840, 0.5560];
green =   [0.4660, 0.6740, 0.1880];
ciel =    [0.3010, 0.7450, 0.9330];
cherry =  [0.6350, 0.0780, 0.1840];
red =     [1.0, 0.0, 0.0];
black =   [0.0, 0.0, 0.0];
magenta = [1.0, 0.0, 1.0];
myTextFont = 20;

% 9/7 dataset: case 1: depth = 0 mm, offset = 0 mm
data0mm     = [110,  44,     89,  71,  284,  143,  156,  72       ];
data0iP     = [114,  64,    113,  95,  298,  190,  210, 128       ];

% 9/11 dataset: case 2: depth = 0 mm, offset = 1 mm
% data1mm     = [525,  186,    40,  18,  882,   18,  35,  43         ];
% data1iP     = [547,   52,   143, 152,  930,  241, 242, 213         ];
% 9/15 REDO dataset: case 2: depth = 0 mm, offset = 1 mm
data1mm     = [2860,  29,    53,  10,  280,   20,  42,   9         ];
data1iP     = [2868,  55,    80,  38,  317,   50,  68,  47         ];

% 9/11 dataset: case 3: depth = 0 mm, offset = 2 mm
% data2mm     = [1140, 108,   158,  30,  168,   25,  13, 405         ];
% data2iP     = [1217, 230,   274, 116,  554,  370, 100, 520         ];
% 9/15 REDO dataset: case 3: depth = 0 mm, offset = 2 mm
data2mm     = [ 940, 262,   102,  78, 1007,  128,  64, 137         ];
data2iP     = [ 971, 290,   138, 112, 1007,  158,  95, 138         ];

% 9/11 dataset: case 4: depth = 0 mm, offset = 3 mm
data3mm     = [749,   26,    50,  15,  255,   60, 566, 230         ];
data3iP     = [903,  425,   180, 400,  380,  370, 780, 590         ];
% 9/13 REDO dataset: case 4: depth = 0 mm, offset = 3 mm
data3mm     = [365,   55,   112,   3,  422,   29,  35,  32         ];
data3iP     = [380,   76,   135,  22,  435,   50,  58,  64         ];

% 9/11 dataset: case 5: depth = 0 mm, offset = 4 mm
data4mm     = [0,     11,    26,  14,  550,   40,  47,  12         ];
data4iP = [136,  700,   500, 550,  900,  470, 580, 390         ];
% 9/13 REDO dataset: case 4: depth = 0 mm, offset = 3 mm
data4mm     = [470,   24,    71,   7,  800,   24, 125,   9         ];
data4iP = [470,   45,    83,  32,  830,   46, 144,  32         ];

% 9/13 dataset: case 6: depth = 0 mm, offset = 5 mm
data5mm     = [140,   53,    64,  30,  620,   46, 100, 33          ];
data5iP = [940,   66,    71,  54,  630,   65, 120, 58          ];

figure
% Vout
x = 1:1:8;
plot(x, data0mm,'-o','MarkerSize',10,...
    'MarkerEdgeColor',red,...
    'MarkerFaceColor',[1 .6 .6]);
hold on
plot(x, data0iP,'-s','MarkerSize',10,...
    'MarkerEdgeColor',red,...
    'MarkerFaceColor',[1 .6 .6]);
hold on
plot(x, data1mm,'-o','MarkerSize',10,...
    'MarkerEdgeColor',green,...
    'MarkerFaceColor',[.6 1 .6]);
hold on
plot(x, data1iP,'-s','MarkerSize',10,...
    'MarkerEdgeColor',green,...
    'MarkerFaceColor',[.6 1 .6]);
hold on
plot(x, data2mm,'-o','MarkerSize',10,...
    'MarkerEdgeColor',blue,...
    'MarkerFaceColor',[.6 .6 1]);
hold on
plot(x, data2iP,'-s','MarkerSize',10,...
    'MarkerEdgeColor',blue,...
    'MarkerFaceColor',[.6 .6 1]);
hold on
plot(x, data3mm,'-o','MarkerSize',10,...
    'MarkerEdgeColor',purple,...
    'MarkerFaceColor',magenta);
hold on
plot(x, data3iP,'-s','MarkerSize',10,...
    'MarkerEdgeColor',purple,...
    'MarkerFaceColor',magenta);
hold on
plot(x, data4mm,'-o','MarkerSize',10,...
    'MarkerEdgeColor',ciel,...
    'MarkerFaceColor',green);
hold on
plot(x, data4iP,'-s','MarkerSize',10,...
    'MarkerEdgeColor',ciel,...
    'MarkerFaceColor',green);
hold on
plot(x, data5mm,'-o','MarkerSize',10,...
    'MarkerEdgeColor',gold,...
    'MarkerFaceColor',blue);
hold on
plot(x, data5iP,'-s','MarkerSize',10,...
    'MarkerEdgeColor',gold,...
    'MarkerFaceColor',blue);
hold on

set(gca,'FontSize', myTextFont); % has no effect on tick label size
title('Measured Vout using u-shaped config #1 and different setups');
xlabel('Subcase number'); % x-axis label
ylabel('Vout (mV)'); % y-axis label
lgd = legend('0 mm MM','0 mm iP','1 mm MM','1 mm iP','2 mm MM','2 mm iP',...
    '3 mm MM','3 mm iP', '4 mm MM','4 mm iP','5 mm MM','5 mm iP',...
    'Location','northeast');
title(lgd,'Offset')

% new 9/14/2021
offset = [0, 1, 2, 3, 4, 5];
noMBAnoFilterMM = [data0mm(1), data1mm(1), data2mm(1), data3mm(1), ...
    data4mm(1), data5mm(1)];
noMBAnoFilteriP = [data0iP(1), data1mm(1), data2mm(1), data3mm(1), ...
    data4mm(1), data5mm(1)];

noMBA850MM = [data0mm(2), data1mm(2), data2mm(2), data3mm(2), ...
    data4mm(2), data5mm(2)];
noMBA850iP = [data0iP(2), data1mm(2), data2mm(2), data3mm(2), ...
    data4mm(2), data5mm(2)];

noMBA890MM = [data0mm(3), data1mm(3), data2mm(3), data3mm(3), ...
    data4mm(3), data5mm(3)];
noMBA890iP = [data0iP(3), data1mm(3), data2mm(3), data3mm(3), ...
    data4mm(3), data5mm(3)];

noMBA900MM = [data0mm(4), data1mm(4), data2mm(4), data3mm(4), ...
    data4mm(4), data5mm(4)];
noMBA900iP = [data0iP(4), data1mm(4), data2mm(4), data3mm(4), ...
    data4mm(4), data5mm(4)];

MBAnoFilterMM = [data0mm(5), data1mm(5), data2mm(5), data3mm(5), ...
    data4mm(5), data5mm(5)];
MBAnoFilteriP = [data0iP(5), data1mm(5), data2mm(5), data3mm(5), ...
    data4mm(5), data5mm(5)];

MBA850MM = [data0mm(6), data1mm(6), data2mm(6), data3mm(6), ...
    data4mm(6), data5mm(6)];
MBA850iP = [data0iP(6), data1mm(6), data2mm(6), data3mm(6), ...
    data4mm(6), data5mm(6)];

MBA890MM = [data0mm(7), data1mm(7), data2mm(7), data3mm(7), ...
    data4mm(7), data5mm(7)];
MBA890iP = [data0iP(7), data1mm(7), data2mm(7), data3mm(7), ...
    data4mm(7), data5mm(7)];

MBA900MM = [data0mm(8), data1mm(8), data2mm(8), data3mm(8), ...
    data4mm(8), data5mm(8)];
MBA900iP = [data0iP(8), data1mm(8), data2mm(8), data3mm(8), ...
    data4mm(8), data5mm(8)];

figure

plot(offset, MBAnoFilterMM,'-o','MarkerSize',10,...
    'MarkerEdgeColor',ciel,...
    'MarkerFaceColor',green);
hold on
plot(offset, MBAnoFilteriP,'-s','MarkerSize',10,...
    'MarkerEdgeColor',ciel,...
    'MarkerFaceColor',green);
hold on
plot(offset, MBA850MM,'-o','MarkerSize',10,...
    'MarkerEdgeColor',gold,...
    'MarkerFaceColor',blue);
hold on
plot(offset, MBA850iP,'-s','MarkerSize',10,...
    'MarkerEdgeColor',gold,...
    'MarkerFaceColor',blue);
hold on
plot(offset, MBA890MM,'-o','MarkerSize',10,...
    'MarkerEdgeColor',black,...
    'MarkerFaceColor',cherry);
hold on
plot(offset, MBA890iP,'-s','MarkerSize',10,...
    'MarkerEdgeColor',black,...
    'MarkerFaceColor',cherry);
hold on
plot(offset, MBA900MM,'-o','MarkerSize',10,...
    'MarkerEdgeColor',rust,...
    'MarkerFaceColor',gold);
hold on
plot(offset, MBA900iP,'-s','MarkerSize',10,...
    'MarkerEdgeColor',rust,...
    'MarkerFaceColor',gold);
hold on

set(gca,'FontSize', myTextFont); % has no effect on tick label size
title('Measured Vout using u-shaped config #1');
xlabel('Offset'); % x-axis label
ylabel('Vout (mV)'); % y-axis label

lgd = legend('MBA no filter MM','MBA no filter iP', ...
    'MBA 850 nm MM','MBA 850 nm iP', ...
    'MBA 890 nm MM','MBA 890 nm iP',...
    'MBA 900 nm MM', 'MBA 900 nm iP', ...
    'Location','northeast');
title(lgd,'Offset')

figure
plot(offset, noMBA850MM,'-o','MarkerSize',10,...
    'MarkerEdgeColor',gold,...
    'MarkerFaceColor',blue);
hold on
plot(offset, noMBA850iP,'-s','MarkerSize',10,...
    'MarkerEdgeColor',gold,...
    'MarkerFaceColor',blue);
hold on
plot(offset, noMBA890MM,'-o','MarkerSize',10,...
    'MarkerEdgeColor',black,...
    'MarkerFaceColor',cherry);
hold on
plot(offset, noMBA890iP,'-s','MarkerSize',10,...
    'MarkerEdgeColor',black,...
    'MarkerFaceColor',cherry);
hold on
plot(offset, noMBA900MM,'-o','MarkerSize',10,...
    'MarkerEdgeColor',rust,...
    'MarkerFaceColor',gold);
hold on
plot(offset, noMBA900iP,'-s','MarkerSize',10,...
    'MarkerEdgeColor',rust,...
    'MarkerFaceColor',gold);
hold on

set(gca,'FontSize', myTextFont); % has no effect on tick label size
title('Measured Vout using u-shaped config #1');
xlabel('Offset'); % x-axis label
ylabel('Vout (mV)'); % y-axis label

lgd = legend(...
    'no MBA 850 nm MM','no MBA 850 nm iP', ...
    'no MBA 890 nm MM','no MBA 890 nm iP',...
    'no MBA 900 nm MM', 'no MBA 900 nm iP', ...
    'Location','northeast');
title(lgd,'Offset')

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 20211012 US2 Vout (mV), punch 5 unless stated otherwise
% MBA (no filter, 850, 890, 900), No MBA (no filter, 850, 890, 900)
US2data1 = [  302,  65.4, 1720, 10.7,  254,   8.3, 108.1, 0 ];
US2data2 = [ 2669,  80.4,  116,  1.9,  930,  11.5,  80.1, 2.4 ];
US2data3 = [ 2321, 138.5,  901,  9.4, 1351, 124,    837, 13.1 ];
US2data4 = [ 2644,  81.1,  214,  2.1,  869, 389,    404, 2.5 ]; % punch 6
US2data5 = [ 1106,  43.3,   73,  1.6,  755, 104,    520, 3.5 ];
figure
% Vout
x = 1:1:8;
plot(x, US2data1,'-o','MarkerSize',10,...
    'MarkerEdgeColor',red,...
    'MarkerFaceColor',[1 .6 .6]);
hold on
plot(x, US2data2,'-o','MarkerSize',10,...
    'MarkerEdgeColor',green,...
    'MarkerFaceColor',[.6 1 .6]);
hold on
plot(x, US2data3,'-o','MarkerSize',10,...
    'MarkerEdgeColor',blue,...
    'MarkerFaceColor',[.6 .6 1]);
hold on
plot(x, US2data4,'-o','MarkerSize',10,...
    'MarkerEdgeColor',purple,...
    'MarkerFaceColor',magenta);
hold on
plot(x, US2data5,'-o','MarkerSize',10,...
    'MarkerEdgeColor',ciel,...
    'MarkerFaceColor',green);
hold on

set(gca,'FontSize', myTextFont); % has no effect on tick label size
title('Measured Vout using u-shaped config #2 (punch 5 and 6)');
xlabel('Subcase number'); % x-axis label
ylabel('Vout (mV)'); % y-axis label
lgd = legend('1 punch5','2 punch5','3 punch5','4 punch6','5 punch5', ...
    'Location','northeast');
title(lgd,'Dataset')

figure
% Vout
x = 1:1:8;
plot(x, US2data1,'-o','MarkerSize',10,...
    'MarkerEdgeColor',red,...
    'MarkerFaceColor',[1 .6 .6]);
hold on
plot(x, US2data2,'-o','MarkerSize',10,...
    'MarkerEdgeColor',green,...
    'MarkerFaceColor',[.6 1 .6]);
hold on
plot(x, US2data3,'-o','MarkerSize',10,...
    'MarkerEdgeColor',blue,...
    'MarkerFaceColor',[.6 .6 1]);
hold on
% plot(x, US2data4,'-o','MarkerSize',10,...
%     'MarkerEdgeColor',purple,...
%     'MarkerFaceColor',magenta);
% hold on
plot(x, US2data5,'-o','MarkerSize',10,...
    'MarkerEdgeColor',ciel,...
    'MarkerFaceColor',green);
hold on

set(gca,'FontSize', myTextFont); % has no effect on tick label size
title('Measured Vout using u-shaped config #2 (only punch 5)');
xlabel('Subcase number'); % x-axis label
ylabel('Vout (mV)'); % y-axis label
lgd = legend('1 punch5','2 punch5','3 punch5','5 punch5', ...
    'Location','northeast')
title(lgd,'Dataset')

function g = saveMyPlot(FigH, myTitle)
global plotOption
    dirStem = "C:\Users\karen\Documents\Data\";
    subDir = "Plots\";
    plotDirStem = sprintf("%s%s", dirStem, subDir);
    switch plotOption
        case {1,2,3}
            myPlotName = sprintf('%s%s', plotDirStem, myTitle);
        case 4
            myPlotName = sprintf('%s%s curve fit', plotDirStem, myTitle);
    end
    saveas(FigH, myPlotName, 'png');
    g = 1;
end