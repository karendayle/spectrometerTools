% plot output voltage after photodiode vs supplied laser diode power
% use 3 different load resistors
% data from notebook 2021/06/14
% for 20210614 SR
close all;

blue =    [0.0000, 0.4470, 0.7410];
rust =    [0.8500, 0.3250, 0.0980];
gold =    [0.9290, 0.6940, 0.1250];
purple =  [0.4940, 0.1840, 0.5560];
green =   [0.4660, 0.6740, 0.1880];
ciel =    [0.3010, 0.7450, 0.9330];
cherry =  [0.6350, 0.0780, 0.1840];
red =     [1.0, 0.0, 0.0];
black =   [0.0, 0.0, 0.0];
magenta = [1.0, 0.0, 1.0];
myTextFont = 30;

% Vin, Vout, Iout, (Iout*R_L) using R_L = 10 kohm. 
R_L = 10.e3;
data1 = [ 0.0, 0.4, 0., (0.e-3*R_L); ...
    1.0, 0.3, 0., (0.e-3*R_L); 2.0, 0.3, 0., (0.e-3*R_L); ...
    2.5, 1.6, 0., (0.e-3*R_L); 3.0, 4.18, 0.46, (0.46e-3*R_L); ...
    3.5, 6.02, 1.16, (1.16e-3*R_L); ...
    4.0, 6.06, 1.8, (1.8e-3*R_L); 4.5, 6.08, 2.5, (2.5e-3*R_L); ...
    5.0, 6.08, 2.51, (2.51e-3*R_L); 5.5, 6.08, 2.5, (2.5e-3*R_L); ...
    6.0, 6.08, 2.49, (2.49e-3*R_L) ];

% Vin, Vout, Iout, (Iout*R_L) using R_L = 100 kohm.
R_L = 100.e3;
data2 = [ 0.0, 0.747, 0., (0.0e-3*R_L); 1.0, 0.735, 0., (0.e-3*R_L); ...
    2.0, 0.736, 0., (0.e-3*R_L); ...
    2.5, 0.741, 0., (0.e-3*R_L); 3.0, 6.34, 0.52, (0.52e-3*R_L); ...
    3.5, 6.39, 1.03, (1.03e-3*R_L); ...
    4.0, 6.42, 1.74, (1.74e-3*R_L); 4.5, 6.44, 2.47, (2.47e-3*R_L); ...
    5.0, 6.44, 2.47, (2.47e-3*R_L); 5.5, 6.45, 2.47, (2.47e-3*R_L); ...
    6.0, 6.45, 2.45, (2.45e-3*R_L) ];

% Vin, Vout, Iout, (Iout*R_L) using R_L = 1 Mohm.
R_L = 1.e6;
data3 = [ 0.0, 47.3e-3, 0., (0.e-3*R_L); ...
    1.0, 47.4e-3, 0., (0.e-3*R_L); 2.0, 47.5e-3, 0., (0.e-3*R_L); ...
    2.5, 47.4e-3, 0., (0.e-3*R_L); 3.0, 6.64, 0.47, (0.47e-3*R_L); ...
    3.5, 6.69, 1.04, (1.04e-3*R_L); ...
    4.0, 6.71, 1.64, (1.64e-3*R_L); 4.5, 6.72, 2.32, (2.32e-3*R_L); ...
    5.0, 6.72, 2.32, (2.32e-3*R_L); 5.5, 6.72, 2.31, (2.31e-3*R_L); ...
    6.0, 6.72, 2.29, (2.29e-3*R_L) ];

figure
% Vout
plot(data1(:,1), data1(:,2),'-o','MarkerSize',10,...
    'MarkerEdgeColor',red,...
    'MarkerFaceColor',[1 .6 .6]);
hold on
plot(data2(:,1), data2(:,2),'-s','MarkerSize',10,...
    'MarkerEdgeColor',blue,...
    'MarkerFaceColor',[.6 .6  1]);
hold on
plot(data3(:,1), data3(:,2),'-^','MarkerSize',10,...
    'MarkerEdgeColor',green,...
    'MarkerFaceColor',[.6 1 .6]);
set(gca,'FontSize', myTextFont); % has no effect on tick label size
title('Measured Vout vs supplied laser diode voltage, with V_R_B = 6V');
xlabel('Voltage supplied to laser diode (V)'); % x-axis label
ylabel('Vout (V)'); % y-axis label
legend('R_L = 10 kohm','R_L = 100 kohm', ...
    'R_L = 1 Mohm','Location','southeast');

% Iout
figure
plot(data1(:,1), data1(:,3),'-o','MarkerSize',10,...
    'MarkerEdgeColor',red,...
    'MarkerFaceColor',[1 .6 .6]);
hold on
plot(data2(:,1), data2(:,3),'-s','MarkerSize',10,...
    'MarkerEdgeColor',blue,...
    'MarkerFaceColor',[.6 .6 1]);
hold on
plot(data3(:,1), data3(:,3),'-^','MarkerSize',10,...
    'MarkerEdgeColor',green,...
    'MarkerFaceColor',[.6 1 .6]);
set(gca,'FontSize', myTextFont)
set(gca,'FontSize', myTextFont); % has no effect on tick label size
title('Measured output current vs supplied laser diode voltage, with V_R_B = 6V');
xlabel('Voltage supplied to laser diode (V)'); % x-axis label
ylabel('I_o_u_t (mA)'); % y-axis label
legend('R_L = 10 kohm','R_L = 100 kohm 1', ...
    'R_L = 1 Mohm','Location','southeast');

% Iout * R_L
figure
plot(data1(:,1), data1(:,4),'-o','MarkerSize',10,...
    'MarkerEdgeColor',red,...
    'MarkerFaceColor',[1 .6 .6]);
hold on
plot(data2(:,1), data2(:,4),'-s','MarkerSize',10,...
    'MarkerEdgeColor',blue,...
    'MarkerFaceColor',[.6 .6 1]);
hold on
plot(data3(:,1), data3(:,4),'-^','MarkerSize',10,...
    'MarkerEdgeColor',green,...
    'MarkerFaceColor',[.6 1 .6]);
set(gca,'FontSize', myTextFont); % has no effect on tick label size
title('Measured current * load resistor vs laser diode voltage, with V_R_B = 6V');
xlabel('Voltage supplied to laser diode (V)'); % x-axis label
ylabel('I_o_u_t * R_L (V)'); % y-axis label
legend('R_L = 10 kohm','R_L = 100 kohm 1', ...
    'R_L = 1 Mohm','Location','northwest');


function g = saveMyPlot(FigH, myTitle)
global plotOption
    dirStem = "C:\Users\karen\Documents\Data\";
    subDir = "Plots\";
    plotDirStem = sprintf("%s%s", dirStem, subDir);
    switch plotOption
        case {1,2,3}
            myPlotName = sprintf('%s%s', plotDirStem, myTitle);
        case 4
            myPlotName = sprintf('%s%s curve fit', plotDirStem, myTitle);
    end
    saveas(FigH, myPlotName, 'png');
    g = 1;
end